# MQ的介绍和对比

## MQ的概念

- 概念

    消息队列（MQ）是一种应用程序对应用程序的通信方法。
    
    应用程序通过写和检索出入列队的针对应用程序的数据（消息）来通信，而无需专用连接来链接它们。
    
    消息传递指的是程序之间通过在消息中发送数据进行通信，而不是通过直接调用彼此来通信，直接调用通常是用于诸如远程过程调用的技术。
    
    排队指的是应用程序通过队列来通信。队列的使用除去了接收和发送应用程序同时执行的要求。

    [MQ-百度百科](https://baike.baidu.com/item/MQ/9062942)

    消息本质上是一种数据结构;

    它包含消费者与服务双方都能识别的数据，这些数据需要在不同的进程（机器）之间进行传递，并可能会被多个完全不同的客户端消费。
    
    在众多分布式技术中，消息传递相较文件传递与远程过程调用（RPC）而言，似乎更胜一筹，因为它具有更好的平台无关性，并能够很好地支持并发与异步调用。对于Web Service与RESTful而言，则可以看做是消息传递技术的一种衍生或封装。

- 重要作用

    - 解耦
    
        **消息通道作为在客户端（消费者，Consumer）与服务（生产者，Producer）之间引入的间接层，可以有效地解除二者之间的耦合。**
    - 异步

        客户端响应通过订阅服务端服务，实现异步，降低客户等待时间

    - 削峰

        并发量大的时候，所有的请求直接怼到数据库，造成数据库连接异常

        消息队列中间件接收前台消息，先放到队列里，把峰值移动到队列中，然后慢慢的按照数据库能处理的并发量，从消息队列中慢慢拉取消息。在生产中，这个短暂的高峰期积压是允许的。
- 缺点

    - 系统可用性

        系统之间增加了一层中间件，对中间件了解不足，使用不到位，会影响使用，增加系统的风险

    - 系统复杂性

        系统和系统虽然有效解耦，但是复杂性变大。会有各种bug和其他问题需要处理;



## 常用的MQ

- 各种开源mq的简单对比 

    中间件名称|ActiveMQ|RabbitMQ|RocketMQ|RocketMQ|
    |-|-|-|-|-|
    开发语言|java|erlang|java|scala|
    吞吐量|万|万|10万|10万|
    时效性|ms|us|ms|ms|
    可用性|	高(主从架构)|	高(主从架构)|	高(主从架构)|	高(主从架构)|
    特性|成熟的产品，在很多公司得到应用；有较多的文档；各种协议支持较好|基于erlang开发，所以并发能力很强，性能极其好，延时很低;管理界面较丰富|MQ功能比较完备，扩展性佳|只支持主要的MQ功能，像一些消息查询，消息回溯等功能没有提供，毕竟是为大数据准备的，在大数据领域应用广。|
